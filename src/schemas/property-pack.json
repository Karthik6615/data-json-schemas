{
  "$schema": "http://json-schema.org/draft-07/schema#",
  "$id": "https://homebuyingandsellinggroup.co.uk/schemas/property-pack.json",
  "type": "object",
  "title": "Property Data Trust Framework Schema",
  "description": "A schema defining the PDTF Property Pack data structure, supporting mapping to BASPI, Law Society and RICS Data Schema elements.",
  "required": ["$schema", "uprn", "propertyPack"],
  "properties": {
    "$schema": {
      "title": "The version reference ($id) of the PDTF Schema used",
      "type": "string"
    },
    "uprn": {
      "RDSRef": "Property/GUID/{name='UPRN',id=?}",
      "title": "Unique Property Reference Number ",
      "type": "integer"
    },
    "propertyPack": {
      "title": "Property Pack",
      "type": "object",
      "properties": {
        "sellers": {
          "RDSRef": "",
          "title": "Information about the sellers",
          "type": "object",
          "required": ["sellerInformation"],
          "properties": {
            "sellerInformation": {
              "title": "",
              "type": "array",
              "minItems": 1,
              "items": {
                "type": "object",
                "title": "Seller Details",
                "required": [
                  "name",
                  "dateOfBirth",
                  "mobileNumber",
                  "email",
                  "address"
                ],
                "properties": {
                  "name": {
                    "title": "",
                    "type": "object",
                    "required": ["firstName", "lastName"],
                    "properties": {
                      "firstName": {
                        "RDSRef": "",
                        "title": "First name",
                        "type": "string"
                      },
                      "middleNames": {
                        "title": "Middle name(s)",
                        "type": "string"
                      },
                      "lastName": {
                        "title": "Last name",
                        "type": "string"
                      }
                    }
                  },
                  "dateOfBirth": {
                    "title": "Date of birth",
                    "type": "string",
                    "format": "date"
                  },
                  "mobileNumber": {
                    "title": "Mobile number",
                    "type": "string"
                  },
                  "email": {
                    "title": "Email address",
                    "type": "string",
                    "format": "email"
                  },
                  "address": {
                    "title": "Address",
                    "$ref": "#/$defs/address"
                  }
                }
              }
            }
          }
        },
        "materialFacts": {
          "$ref": "https://homebuyingandsellinggroup.co.uk/schemas/baspi-a-material-facts.json"
        },
        "additionalLegalInfo": {
          "$ref": "https://homebuyingandsellinggroup.co.uk/schemas/baspi-b-legal-information.json"
        },
        "titlesToBeSold": {
          "RDSRef": "",
          "title": "Title(s) as registered with HMLR which are included in the sale",
          "type": "array",
          "items": {
            "type": "object",
            "title": "Registered Title",
            "properties": {
              "titleNumber": {
                "RDSRef": "",
                "title": "Title Number",
                "type": "string"
              },
              "titleExtents": {
                "RDSRef": "",
                "title": "Title Extents",
                "description": "One or more index polygons describing indicative location of registered title from National Polygon Dataset",
                "type": "array",
                "items": {
                  "$ref": "https://geojson.org/schema/GeoJSON.json"
                }
              },
              "registerExtract": {
                "title": "HMLR Register Extract",
                "$ref": "https://homebuyingandsellinggroup.co.uk/schemas/title-deed.json"
              }
            }
          }
        },
        "energyPerformanceCertificate": {
          "RDSRef": "",
          "title": "Energy Performance Certificate",
          "$ref": "https://homebuyingandsellinggroup.co.uk/schemas/energy-performance-certificate.json"
        }
      }
    }
  },
  "$defs": {
    "address": {
      "type": "object",
      "properties": {
        "address1": {
          "title": "Address 1",
          "type": "string",
          "minLength": 1
        },
        "address2": {
          "title": "Address 2",
          "type": "string"
        },
        "town": {
          "title": "Town",
          "type": "string"
        },
        "county": {
          "title": "County",
          "type": "string"
        },
        "postcode": {
          "title": "Postcode",
          "type": "string",
          "minLength": 1
        }
      },
      "required": ["address1", "postcode"]
    }
  }
}
